<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Koncat.Parsers</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Koncat-Parsers.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">koncat-0.1.0.0: An experimental, modular IRC Bot</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>Linux</td></tr><tr><th>Stability</th><td>Unstable</td></tr><tr><th>Maintainer</th><td>grab@thereisnobreak.net</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Koncat.Parsers</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Parsing Module Handshakes
</a><ul><li><a href="#g:2">Default values for Arguments
</a></li></ul></li><li><a href="#g:3">Parsing IRC Messages
</a></li><li><a href="#g:4">Parsing (execution-)Time
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code>Koncat.Parsers</code> exports various parsers neccessary to efficiently handle user queries.
 It is using the Parsec Text Parsing library internally.
</p><p>Todo:
</p><ul><li> Configuration File instead of defaultValues
</li><li> Search for cases where parseIRC might fail, rewrite
</li></ul></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:parseHandshake">parseHandshake</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Koncat-Types.html#t:Handshake">Handshake</a></li><li class="src short"><a href="#v:parseAlias">parseAlias</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; (<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:runFuncParser">runFuncParser</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; [(<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> [(<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Char.html#t:Char">Char</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)])]</li><li class="src short"><a href="#v:defaultValues">defaultValues</a> :: [(<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Char.html#t:Char">Char</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)]</li><li class="src short"><a href="#v:parseIRC">parseIRC</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Koncat-Types.html#t:GenericIRC">GenericIRC</a></li><li class="src short"><a href="#v:parseIRCFunctionCall">parseIRCFunctionCall</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> ParseError <a href="Koncat-Types.html#t:IRCCommand">IRCCommand</a></li><li class="src short"><a href="#v:getTime">getTime</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></li></ul></div><div id="interface"><h1 id="g:1">Parsing Module Handshakes
</h1><div class="top"><p class="src"><a name="v:parseHandshake" class="def">parseHandshake</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Koncat-Types.html#t:Handshake">Handshake</a><a href="url/Koncat.Parsers.lhs.html#parseHandshake" class="link">Source</a></p><div class="doc"><p>parseHandshake gets the raw text as recieved when asking a module
     for a handshake, parses it and stuffs it in the Handshake Data Type.
</p></div></div><div class="top"><p class="src"><a name="v:parseAlias" class="def">parseAlias</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; (<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)<a href="url/Koncat.Parsers.lhs.html#parseAlias" class="link">Source</a></p><div class="doc"><p>Extract 2 quoted Strings from one String.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>parseAlias &quot;\&quot;First String\&quot; \&quot;Second String\&quot;&quot;
</code></strong>(&quot;First String&quot;, &quot;Second String&quot;)
</pre></div></div><div class="top"><p class="src"><a name="v:runFuncParser" class="def">runFuncParser</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; [(<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> [(<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Char.html#t:Char">Char</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)])]<a href="url/Koncat.Parsers.lhs.html#runFuncParser" class="link">Source</a></p><div class="doc"><p>runFuncParser will parse the function part of the Handshake.
See <code>Figure 1</code> (-&gt; Source Code) for further elaboration.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>runFuncParser &quot;{helloworld:[A Hello World Function](*String)%E=5s%P=Admin}&quot;
</code></strong>[(&quot;helloworld&quot;,&quot;A Hello World Function&quot;,&quot;*String&quot;,Just [('E',&quot;5s&quot;),('P',&quot;Admin&quot;)])]
</pre></div></div><h2 id="g:2">Default values for Arguments
</h2><div class="top"><p class="src"><a name="v:defaultValues" class="def">defaultValues</a> :: [(<a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Char.html#t:Char">Char</a>, <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>)]<a href="url/Koncat.Parsers.lhs.html#defaultValues" class="link">Source</a></p><div class="doc"><p>Hardcoded lookup-table that describes default values for variables.
     They will be inserted in the SQL Database if the user didn't set it!
</p></div></div><h1 id="g:3">Parsing IRC Messages
</h1><div class="top"><p class="src"><a name="v:parseIRC" class="def">parseIRC</a><a href="url/Koncat.Parsers.lhs.html#parseIRC" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>Raw Input String
</p></td></tr><tr><td class="src">-&gt; <a href="Koncat-Types.html#t:GenericIRC">GenericIRC</a></td><td class="doc"><p>Parsed IRC Message
</p></td></tr></table></div><div class="doc"><p>parseIRC parses everything except the actual message
the Bot recieves from IRC, and stuffs it in the GenericIRC type.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>parseIRC &quot;:tsv!tsv@localhost PRIVMSG #main :This is the actual message &quot;
</code></strong>GenericIRC {user = UserInfo {name = &quot;tsv&quot;, rName = &quot;tsv&quot;, vhost = &quot;localhost&quot;}, orig = &quot;#main&quot;, msg = [&quot;This&quot;,&quot;is&quot;,&quot;the&quot;,&quot;actual&quot;,&quot;message&quot;]}
</pre><ul><li> See Figure 2 (Source Code) for further reference on implementation
</li><li> See RFC 1459, <a href="http://www.faqs.org/rfcs/rfc1459.html">http://www.faqs.org/rfcs/rfc1459.html</a> for further reference on the IRC specification.
</li></ul></div></div><div class="top"><p class="src"><a name="v:parseIRCFunctionCall" class="def">parseIRCFunctionCall</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> ParseError <a href="Koncat-Types.html#t:IRCCommand">IRCCommand</a><a href="url/Koncat.Parsers.lhs.html#parseIRCFunctionCall" class="link">Source</a></p><div class="doc"><p>parseIRCFunctionCall is  parsing an IRC message which is directed to the Bot and referring to a Module.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>parseIRCFunctionCall &quot;:util.testytest #dothingsheh(Arg1,Arg2) -flag -flag2=SomeArgument&quot;
</code></strong>Right (IRCCommand {qModule = &quot;util.testytest&quot;, qFunc = &quot;dothingsheh&quot;, qArgs = Just [&quot;Arg1&quot;,&quot;Arg2&quot;], qFlags = Just [(&quot;flag&quot;,Nothing),(&quot;flag2&quot;,Just &quot;SomeArgument&quot;)]})
</pre></div></div><h1 id="g:4">Parsing (execution-)Time
</h1><div class="top"><p class="src"><a name="v:getTime" class="def">getTime</a> :: <a href="/usr/share/doc/ghc/html/libraries/bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a><a href="url/Koncat.Parsers.lhs.html#getTime" class="link">Source</a></p><div class="doc"><p>Get Microseconds from <code>int{s|sec|min|h|d}</code>, as required for setting a timeout using System.Timout
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>getTime &quot;10s&quot;
</code></strong>10000000
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>getTime &quot;2min&quot;
</code></strong>120000000
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>